<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 520" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <!-- Drop shadow filter -->
    <filter id="shadow" x="-4%" y="-4%" width="108%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.10"/>
    </filter>
    <!-- Arrow marker -->
    <marker id="arrow" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="10" markerHeight="7" orient="auto-start-auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
    <marker id="arrow-blue" viewBox="0 0 10 7" refX="10" refY="3.5" markerWidth="10" markerHeight="7" orient="auto-start-auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="520" rx="12" fill="#0f172a"/>

  <!-- ===== BROWSER CARD ===== -->
  <g filter="url(#shadow)">
    <rect x="40" y="120" width="170" height="200" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1.5"/>
    <!-- Header bar -->
    <rect x="40" y="120" width="170" height="38" rx="12" fill="#6366f1"/>
    <rect x="40" y="140" width="170" height="18" fill="#6366f1"/>
    <!-- Browser icon -->
    <circle cx="68" cy="139" r="8" fill="none" stroke="#fff" stroke-width="1.5"/>
    <circle cx="68" cy="139" r="3" fill="#fff"/>
    <text x="84" y="144" fill="#fff" font-size="13" font-weight="600">Browser</text>
  </g>
  <!-- Browser content -->
  <text x="125" y="190" fill="#e2e8f0" font-size="12" text-anchor="middle" font-weight="500">Any web page</text>
  <!-- Mini page icon lines -->
  <rect x="85" y="205" width="80" height="4" rx="2" fill="#334155"/>
  <rect x="85" y="215" width="65" height="4" rx="2" fill="#334155"/>
  <rect x="85" y="225" width="72" height="4" rx="2" fill="#334155"/>
  <rect x="85" y="235" width="50" height="4" rx="2" fill="#334155"/>
  <text x="125" y="270" fill="#94a3b8" font-size="10" text-anchor="middle">Articles, tweets,</text>
  <text x="125" y="283" fill="#94a3b8" font-size="10" text-anchor="middle">posts, pages</text>

  <!-- ===== ARROW 1: Browser â†’ Extension ===== -->
  <line x1="210" y1="220" x2="268" y2="220" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)" stroke-dasharray="6,3"/>
  <text x="240" y="210" fill="#64748b" font-size="9" text-anchor="middle">click</text>

  <!-- ===== CHROME EXTENSION CARD ===== -->
  <g filter="url(#shadow)">
    <rect x="275" y="70" width="230" height="300" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1.5"/>
    <!-- Header bar -->
    <rect x="275" y="70" width="230" height="38" rx="12" fill="#3b82f6"/>
    <rect x="275" y="90" width="230" height="18" fill="#3b82f6"/>
    <!-- Chrome icon -->
    <circle cx="303" cy="89" r="8" fill="none" stroke="#fff" stroke-width="1.5"/>
    <line x1="303" y1="81" x2="303" y2="97" stroke="#fff" stroke-width="1"/>
    <line x1="295" y1="89" x2="311" y2="89" stroke="#fff" stroke-width="1"/>
    <text x="319" y="94" fill="#fff" font-size="13" font-weight="600">Chrome Extension</text>
  </g>

  <!-- Content Scripts sub-box -->
  <rect x="295" y="125" width="190" height="80" rx="8" fill="#1a2332" stroke="#2563eb" stroke-width="1" stroke-opacity="0.4"/>
  <text x="390" y="148" fill="#93c5fd" font-size="11" font-weight="600" text-anchor="middle">Content Scripts</text>
  <!-- Readability pill -->
  <rect x="305" y="158" width="82" height="22" rx="11" fill="#1e3a5f"/>
  <text x="346" y="173" fill="#60a5fa" font-size="10" text-anchor="middle">Readability</text>
  <!-- Turndown pill -->
  <rect x="393" y="158" width="82" height="22" rx="11" fill="#1e3a5f"/>
  <text x="434" y="173" fill="#60a5fa" font-size="10" text-anchor="middle">Turndown</text>
  <!-- Platform extractors -->
  <rect x="305" y="186" width="170" height="18" rx="9" fill="#172033"/>
  <text x="390" y="199" fill="#64748b" font-size="9" text-anchor="middle">X  Â·  LinkedIn  Â·  Substack  Â·  Web</text>

  <!-- Service Worker sub-box -->
  <rect x="295" y="220" width="190" height="55" rx="8" fill="#1a2332" stroke="#2563eb" stroke-width="1" stroke-opacity="0.4"/>
  <!-- Gear icon -->
  <circle cx="320" cy="248" r="8" fill="none" stroke="#93c5fd" stroke-width="1.2"/>
  <circle cx="320" cy="248" r="3" fill="#93c5fd"/>
  <text x="336" y="244" fill="#93c5fd" font-size="11" font-weight="600">Service Worker</text>
  <text x="336" y="260" fill="#64748b" font-size="10">Orchestrator</text>

  <!-- Dedup sub-box -->
  <rect x="295" y="285" width="190" height="40" rx="8" fill="#1a2332" stroke="#2563eb" stroke-width="1" stroke-opacity="0.4"/>
  <text x="390" y="305" fill="#93c5fd" font-size="11" font-weight="500" text-anchor="middle">Deduplication</text>
  <text x="390" y="318" fill="#64748b" font-size="9" text-anchor="middle">URL normalization + SHA-256</text>

  <!-- ===== ARROW 2: Extension â†’ Native Host ===== -->
  <line x1="505" y1="220" x2="563" y2="220" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrow)" stroke-dasharray="6,3"/>
  <text x="534" y="208" fill="#64748b" font-size="9" text-anchor="middle">Native</text>
  <text x="534" y="219" fill="#64748b" font-size="9" text-anchor="middle">Messaging</text>

  <!-- ===== NATIVE HOST CARD ===== -->
  <g filter="url(#shadow)">
    <rect x="570" y="100" width="210" height="240" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1.5"/>
    <!-- Header bar -->
    <rect x="570" y="100" width="210" height="38" rx="12" fill="#10b981"/>
    <rect x="570" y="120" width="210" height="18" fill="#10b981"/>
    <!-- Python icon -->
    <text x="598" y="124" fill="#fff" font-size="14">&#x1f40d;</text>
    <text x="614" y="124" fill="#fff" font-size="13" font-weight="600">Native Host</text>
  </g>

  <text x="675" y="165" fill="#6ee7b7" font-size="11" font-weight="600" text-anchor="middle">kb_host.py</text>
  <text x="675" y="182" fill="#94a3b8" font-size="10" text-anchor="middle">Local filesystem bridge</text>

  <!-- File structure inside native host -->
  <rect x="590" y="198" width="170" height="120" rx="8" fill="#1a2332" stroke="#059669" stroke-width="1" stroke-opacity="0.4"/>
  <text x="610" y="218" fill="#a7f3d0" font-size="11" font-weight="500">Creates KB folder:</text>

  <!-- Folder tree -->
  <text x="610" y="240" fill="#6ee7b7" font-size="11" font-family="'SF Mono', 'Fira Code', monospace">ğŸ“ date_slug/</text>
  <text x="625" y="258" fill="#94a3b8" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">â”œâ”€ meta.yaml</text>
  <text x="625" y="274" fill="#94a3b8" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">â”œâ”€ assets/content.md</text>
  <text x="625" y="290" fill="#94a3b8" font-size="10" font-family="'SF Mono', 'Fira Code', monospace">â””â”€ canonicals/</text>

  <!-- ===== ARROW 3: Native Host â†’ Obsidian ===== -->
  <line x1="675" y1="340" x2="675" y2="395" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- ===== OBSIDIAN / OUTPUT CARD ===== -->
  <g filter="url(#shadow)">
    <rect x="530" y="400" width="290" height="95" rx="12" fill="#1e293b" stroke="#334155" stroke-width="1.5"/>
    <!-- Header bar - gradient feel -->
    <rect x="530" y="400" width="290" height="38" rx="12" fill="#7c3aed"/>
    <rect x="530" y="420" width="290" height="18" fill="#7c3aed"/>
    <text x="560" y="424" fill="#fff" font-size="13" font-weight="600">Your Obsidian Vault / Knowledge Base</text>
  </g>
  <!-- Output pills -->
  <rect x="550" y="450" width="58" height="24" rx="12" fill="#2e1065"/>
  <text x="579" y="466" fill="#c4b5fd" font-size="10" text-anchor="middle">RAG</text>

  <rect x="616" y="450" width="78" height="24" rx="12" fill="#2e1065"/>
  <text x="655" y="466" fill="#c4b5fd" font-size="10" text-anchor="middle">AI Agents</text>

  <rect x="702" y="450" width="72" height="24" rx="12" fill="#2e1065"/>
  <text x="738" y="466" fill="#c4b5fd" font-size="10" text-anchor="middle">Dataview</text>

  <rect x="782" y="450" width="28" height="24" rx="12" fill="#2e1065"/>
  <text x="796" y="466" fill="#c4b5fd" font-size="10" text-anchor="middle">MCP</text>

  <!-- ===== STEP LABELS ===== -->
  <!-- Step 1 -->
  <circle cx="235" cy="236" r="10" fill="#6366f1"/>
  <text x="235" y="240" fill="#fff" font-size="10" font-weight="700" text-anchor="middle">1</text>

  <!-- Step 2 -->
  <circle cx="530" cy="236" r="10" fill="#3b82f6"/>
  <text x="530" y="240" fill="#fff" font-size="10" font-weight="700" text-anchor="middle">2</text>

  <!-- Step 3 -->
  <circle cx="660" cy="370" r="10" fill="#10b981"/>
  <text x="660" y="374" fill="#fff" font-size="10" font-weight="700" text-anchor="middle">3</text>

  <!-- Title -->
  <text x="450" y="38" fill="#f1f5f9" font-size="18" font-weight="700" text-anchor="middle">AgentMarKB â€” Architecture</text>
  <text x="450" y="56" fill="#64748b" font-size="11" text-anchor="middle">From browser to structured knowledge in three steps</text>
</svg>